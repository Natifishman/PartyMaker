# PartyMaker - דיאגרמות זרימת משתמש מתקדמות
## דיאגרמות זרימה ברמת ארגון - מבוססות על ניתוח ארכיטקטורה מעמיק

---

## 🎯 זרימת אימות וסשן משתמש

```mermaid
graph TD
    A[מסך הפתחה<br/>אתחול אפליקציה] --> B{בדיקת מצב אימות}
    B -->|אין סשן פעיל| C[מסך הכרות<br/>מסך הכרות]
    B -->|סשן פעיל אך לא מאומת| D[מסך התחברות<br/>התחברות]
    B -->|סשן מאומת| E[מסך ראשי<br/>מסך ראשי]
    
    C --> F[3 מסכי הכרות<br/>החלקות הכרות]
    F --> D
    
    D --> G{סוג אימות}
    G -->|אימייל + סיסמה| H[מנהל אימות<br/>אימות אימייל פיירבייס]
    G -->|כניסה עם גוגל| I[מנהל אימות מאובטח<br/>גוגל OAuth2]
    G -->|איפוס סיסמה| J[פעילות איפוס סיסמה]
    G -->|רישום חדש| K[פעילות רישום]
    
    H --> L[מאמת סיסמה<br/>בדיקת אבטחה]
    L --> M{בדיקת תקינות}
    M -->|תקין| N[אימות פיירבייס]
    M -->|שגוי| O[הודעת שגיאה ספציפית]
    
    I --> P[ממשק גוגל כניסה]
    P --> Q[קבלת אסימון גוגל]
    Q --> N
    
    N --> R[מנהל אימות - הגדרת משתמש נוכחי]
    R --> S[מנהל העדפות מוצפן<br/>שמירת סשן מוצפן]
    S --> T[העדפות פרטימייקר<br/>משתמש התחבר במפורש = אמת]
    T --> E
    
    K --> U[רישום עם אימות בזמן אמת]
    U --> V[מאמת סיסמה + מנהל תצורה מאובטח]
    V --> W{כל השדות תקינים?}
    W -->|כן| N
    W -->|לא| X[הודעות שגיאה ספציפיות]
    
    J --> Y[הזנת אימייל]
    Y --> Z[שליחת קישור איפוס]
    Z --> AA[איפוס סיסמה פיירבייס]
    
    O --> D
    X --> K
    
    E --> BB[מסך ראשי - הגדרת כתובת שרת כפויה]
    BB --> CC[מנהל רשת - אתחול]
    CC --> DD[טעינת קבוצות המשתמש]
    
    style A fill:#e3f2fd
    style E fill:#c8e6c9
    style N fill:#e8f5e8
    style S fill:#fff8e1
```

---

## 🏠 ארכיטקטורת מסך ראשי וזרימת נתונים

```mermaid
graph TD
    A[מסך ראשי] --> B[יצירת אפליקציית מסיבה]
    B --> C[אתחול רכיבי מערכת]
    C --> D[אתחול פיירבייס]
    C --> E[אתחול מנהל רשת]
    C --> F[אתחול מאגר קבוצות]
    C --> G[קבלת מופע מנהל קישוריות]
    
    A --> H[מודל תצוגת מסך ראשי]
    H --> I[מאגר קבוצות]
    I --> J{תבנית מאגר}
    J --> K[מקור נתונים מקומי קבוצות<br/>מסד נתונים חדר]
    J --> L[מקור נתונים מרוחק קבוצות<br/>לקוח שרת פיירבייס]
    
    L --> M[כלי רשת - ביצוע עם ניסיון חוזר]
    M --> N{בדיקת חיבור}
    N -->|מחובר| O[בקשת HTTP<br/>https://partymaker.onrender.com]
    N -->|לא מחובר| P[שימוש במטמון מקומי]
    
    O --> Q[בקר פיירבייס - קבלת קבוצות משתמש]
    Q --> R[שירות פיירבייס - קבלת נתונים]
    R --> S[מסד נתונים בזמן אמת פיירבייס]
    
    A --> T[מסך ראשי - התבוננות במודל תצוגה]
    T --> U[נתונים חיים - התבוננות]
    U --> V{סוג עדכון}
    V -->|קבוצות חדשות| W[מתאם קבוצות - עדכון פריטים]
    V -->|מצב טעינה| X[מנהל מצב טעינה - הצגת טעינה]
    V -->|שגיאה| Y[מנהל מצב ממשק - הצגת שגיאה]
    
    W --> Z[תצוגה מחזורית - עדכון ממשק]
    X --> AA[סרגל התקדמות מוצג]
    Y --> BB[הודעת שגיאה]
    
    A --> CC{פעולות משתמש}
    CC -->|משיכה לרענון| DD[פריסת החלקה לרענון]
    CC -->|לחיצה על קבוצה| EE[ניווט למסך קבוצה]
    CC -->|כפתור בינה מלאכותית| FF[ניווט לצ׳אט]
    CC -->|תפריט| GG[פריט תפריט נבחר]
    
    DD --> HH[מודל תצוגה - טעינת קבוצות משתמש<br/>רענון כפוי = אמת]
    EE --> II[פעילות מסיבה ראשית<br/>מטא נתונים נוספים]
    FF --> JJ[פעילות צ׳אט GPT]
    GG --> KK[פעילות הגדרות שרת<br/>או התנתקות]
    
    A --> LL{ניהול זיכרון}
    LL --> MM[מנהל זיכרון - ביצוע ניקוי זיכרון]
    LL --> NN[כלי חוטים - הרצה בחוט ראשי]
    LL --> OO[בהמשכה: בדיקת זמן המתנה לרענון]
    
    style A fill:#e1f5fe
    style H fill:#e8f5e8
    style I fill:#fff3e0
    style O fill:#f3e5f5
    style S fill:#ffebee
```

---

## 🎉 פעילות מסיבה ראשית - זרימת ניהול קבוצות מקיפה

```mermaid
graph TD
    A[פעילות מסיבה ראשית] --> B[כוונה - קבלת מחרוזת נוספת<br/>מפתח קבוצה + מפתח משתמש]
    B --> C[אתחול מודל תצוגת מסיבה ראשית]
    C --> D[פריסת 8 כרטיסי תכונות]
    
    D --> E[כרטיס 1: מידע קבוצה<br/>פרטי קבוצה]
    D --> F[כרטיס 2: מצב נוכחות<br/>מצב נוכחות]
    D --> G[כרטיס 3: חברים מוזמנים<br/>פעילות חברים מוזמנים]
    D --> H[כרטיס 4: חברים מאושרים<br/>פעילות חברים מגיעים]
    D --> I[כרטיס 5: פעולות מנהל<br/>פעילות אפשרויות מנהל]
    D --> J[כרטיס 6: צ׳אט קבוצתי<br/>פעילות צ׳אט]
    D --> K[כרטיס 7: הזמנת חברים<br/>פעילות הוספת חברים]
    D --> L[כרטיס 8: עזיבת קבוצה<br/>יציאה מקבוצה]
    
    E --> M[הצגת פרטי קבוצה]
    M --> N[שם, תיאור, תאריך<br/>מיקום, מחיר, סוג]
    M --> O[מודל תצוגת קבוצה - התבוננות בקבוצה]
    
    F --> P{בחירת נוכחות}
    P -->|מגיע| Q[מפתחות מגיעים מפתח משתמש = אמת]
    P -->|לא מגיע| R[מפתחות מגיעים מפתח משתמש = שקר]
    P -->|לא ידוע| S[מפתחות מגיעים מפתח משתמש = ריק]
    
    Q --> T[מאגר קבוצות - עדכון קבוצה]
    R --> T
    S --> T
    T --> U[עדכון פיירבייס<br/>סנכרון בזמן אמת]
    
    G --> V[מתאם חברים מוזמנים]
    V --> W[הצגת מפת מפתחות חברים]
    W --> X[מחווני מצב משתמש]
    
    H --> Y[מתאם חברים מגיעים]
    Y --> Z[חברים מגיעים מסוננים]
    Z --> AA[סטטיסטיקות וספירה]
    
    I --> BB{בדיקת הרשאות}
    BB -->|מפתח מנהל שווה למפתח משתמש| CC[גישה לפאנל מנהל]
    BB -->|חבר רגיל| DD[דיאלוג סירוב גישה]
    
    CC --> EE[פעילות הגדרות מנהל]
    CC --> FF[פעילות שינוי תאריך<br/>ניהול תאריך ושעה]
    CC --> GG[מחיקת קבוצה<br/>עם אישור]
    CC --> HH[ניהול חברים<br/>הוספה/הסרה של משתמשים]
    
    J --> II[פעילות צ׳אט<br/>הודעות בזמן אמת]
    II --> JJ[מודל תצוגת צ׳אט קבוצתי]
    JJ --> KK[מנהל הצפנת הודעות<br/>הצפנה מקצה לקצה]
    KK --> LL[מנהל מפתחות קבוצה<br/>חלוקת מפתחות]
    LL --> MM[הודעות קבוצות פיירבייס]
    
    K --> NN[פעילות הוספת חברים]
    NN --> OO{שיטת הוספה}
    OO -->|אימייל ידני| PP[קלט אימייל + אימות]
    OO -->|רשימת אנשי קשר| QQ[גישה לאנשי קשר במכשיר]
    
    PP --> RR[מאגר משתמשים - חיפוש לפי אימייל]
    QQ --> SS[בקשת הרשאה<br/>קריאת אנשי קשר]
    RR --> TT[הוספה למפתחות חברים]
    SS --> UU[בחירת איש קשר]
    UU --> TT
    
    L --> VV{דיאלוג אישור}
    VV -->|אישור| WW[מאגר קבוצות - עזיבת קבוצה]
    VV -->|ביטול| A
    
    WW --> XX[הסרה ממפתחות חברים]
    XX --> YY[מנהל מפתחות קבוצה - הסרת משתמש וסיבוב מפתח]
    YY --> ZZ[ניווט חזרה למסך ראשי]
    
    A --> AAA[אינטגרציה של שכבת אבטחה]
    AAA --> BBB[מנהל הצמדת SSL<br/>תקשורת מאובטחת]
    AAA --> CCC[סוכן אבטחה<br/>ניטור איומים]
    AAA --> DDD[מאמת סיסמה<br/>אימות קלט]
    
    A --> EEE[אופטימיזציה של ביצועים]
    EEE --> FFF[כלי חוטים<br/>פעולות רקע]
    EEE --> GGG[מנהל זיכרון<br/>ניקוי משאבים]
    EEE --> HHH[מנהל מצב טעינה<br/>בקרת מצב ממשק]
    
    style A fill:#fff3e0
    style I fill:#fce4ec
    style J fill:#f3e5f5
    style AAA fill:#fff8e1
    style EEE fill:#f1f8e9
    style MM fill:#ffebee
```

---

## 🤖 אינטגרציה מתקדמת של עוזר בינה מלאכותית - זרימת OpenAI ChatGPT

```mermaid
graph TD
    A[פעילות צ׳אט GPT] --> B[אתחול מודל תצוגת GPT]
    B --> C[הגדרת מתאם צ׳אטבוט]
    C --> D[תצוגה מחזורית עם הודעות צ׳אט]
    
    A --> E{עיבוד קלט משתמש}
    E -->|קלט טקסט| F[אימות הודעה]
    E -->|קלט קולי| G[זיהוי דיבור לטקסט]
    E -->|קלט תמונה| H[עיבוד תמונה ו-OCR]
    
    F --> I[מודל תצוגת GPT - שליחת הודעה]
    G --> I
    H --> I
    
    I --> J[ממשק OpenAI - יצירת השלמת צ׳אט]
    J --> K[בניית כותרות בקשה]
    K --> L[מפתח API מקובץ סודות]
    L --> M[בקשת HTTPS מוצמדת SSL]
    
    M --> N[ממשק OpenAI GPT-4]
    N --> O{תגובת API}
    O -->|הצלחה 200| P[ניתוח תגובת JSON]
    O -->|מוגבל בקצב 429| Q[ניסיון חוזר עם עיכוב אקספוננציאלי]
    O -->|שגיאה 4xx/5xx| R[טיפול בשגיאות והודעה למשתמש]
    
    P --> S[הודעת צ׳אט GPT מתגובה]
    S --> T[ניהול הקשר שיחה]
    T --> U[מתאם צ׳אטבוט - הוספת הודעה]
    U --> V[אנימציה של תצוגה מחזורית]
    
    Q --> W[כלי חוטים - הרצה בחוט ראשי עם עיכוב]
    W --> X[בדיקת מונה ניסיונות]
    X -->|< מקסימום ניסיונות| J
    X -->|>= מקסימום ניסיונות| R
    
    R --> Y[מנהל מצב ממשק - הצגת שגיאה]
    Y --> Z[יצירת תגובת גיבוי]
    
    A --> AA[שכבת התמדה הודעות]
    AA --> BB[מסד נתונים חדר - DAO הודעות צ׳אט]
    BB --> CC[היסטוריית הודעות מקומית]
    CC --> DD[תור הודעות לא מקוון]
    
    A --> EE{תכונות מתקדמות}
    EE -->|מודעות הקשר| FF[הצעות ספציפיות לקבוצה]
    EE -->|תכנון מסיבות| GG[טיפים לניהול אירועים]
    EE -->|שירותי מיקום| HH[אינטגרציה של מנהל כלי מפות]
    EE -->|אינטגרציה עם לוח שנה| II[הצעות תאריך/שעה]
    
    FF --> JJ[ניתוח פרטי קבוצה]
    GG --> KK[אלגוריתמי תקציב ותכנון]
    HH --> LL[ממשק מקומות קרובים]
    II --> MM[ממשק לוח שנה של גוגל]
    
    A --> NN[אבטחה ופרטיות]
    NN --> OO[הצפנת הודעות במנוחה]
    NN --> PP[הגנה על מפתח API]
    NN --> QQ[אנונימיזציה של נתוני משתמש]
    NN --> RR[מטפל שגיאות רשת - חיטוי תגובה]
    
    A --> SS{אופטימיזציית ביצועים}
    SS --> TT[חלוקת הודעות לתגובות ארוכות]
    SS --> UU[עיבוד רקע]
    SS --> VV[ניהול זיכרון]
    SS --> WW[מטמון בקשות רשת]
    
    style A fill:#f3e5f5
    style N fill:#fff3e0
    style P fill:#e8f5e8
    style R fill:#ffebee
    style NN fill:#fff8e1
```

---

## 👤 ניהול פרופיל מתקדם ואינטגרציית אבטחה

```mermaid
graph TD
    A[פעילות עריכת פרופיל] --> B[אתחול מודל תצוגת פרופיל]
    B --> C[טעינת נתוני משתמש]
    C --> D[מנהל אימות - קבלת משתמש נוכחי]
    
    A --> E{פעולות פרופיל}
    E -->|תמונת פרופיל| F[בחירה ועיבוד תמונה]
    E -->|עריכת שם משתמש| G[אימות ועדכון שם משתמש]
    E -->|שינוי סיסמה| H[עדכון סיסמה מאובטח]
    E -->|הגדרות חשבון| I[הגדרות פרטיות ואבטחה]
    
    F --> J[מנהל קבצים - בחירה מגלריה]
    J --> K[מנהל הרשאות - בדיקת הרשאת אחסון]
    K --> L{הרשאה ניתנה?}
    L -->|כן| M[דחסן תמונות - דחיסה להעלאה]
    L -->|לא| N[דיאלוג בקשת הרשאה]
    
    M --> O[טוען תמונות Glide - טעינת תצוגה מקדימה]
    O --> P[העלאה לאחסון פיירבייס]
    P --> Q[מאגר משתמשים - עדכון תמונת פרופיל]
    
    G --> R[מודל תצוגת פרופיל - אימות שם משתמש]
    R --> S[מאמת סיסמה - אימות קלט]
    S --> T{תוצאות אימות}
    T -->|תקף| U[מאגר משתמשים - עדכון משתמש]
    T -->|לא תקף| V[הצגת שגיאה עם הודעות ספציפיות]
    
    H --> W[מנהל אימות מאובטח - שינוי סיסמה]
    W --> X[אימות סיסמה נוכחית]
    X --> Y[מאמת סיסמה - אימות סיסמה חדשה]
    Y --> Z[אחסון מאובטח משופר - עדכון אישורים]
    
    I --> AA[פאנל הגדרות פרטיות]
    AA --> BB[מנהל העדפות מוצפן]
    BB --> CC[עדכון העדפות אבטחה]
    
    A --> DD[אינטגרציית שכבת רשת]
    DD --> EE[מנהל קישוריות - בדיקת זמינות רשת]
    EE --> FF{מצב חיבור}
    FF -->|מקוון| GG[לקוח שרת פיירבייס - עדכון משתמש]
    FF -->|לא מקוון| HH[מקור נתונים מקומי משתמש - שמירת עדכון בתור]
    
    GG --> II[כלי רשת - ביצוע עם ניסיון חוזר]
    II --> JJ{תגובת שרת}
    JJ -->|הצלחה| KK[משוב הצלחה ממשק]
    JJ -->|כשל| LL[טיפול בשגיאות ולוגיקת ניסיון חוזר]
    
    HH --> MM[תור פעולות ממתינות]
    MM --> NN[משקיף מצב רשת]
    NN -->|חיבור שוחזר| OO[סנכרון שינויים ממתינים]
    
    A --> PP[ניטור אבטחה]
    PP --> QQ[סוכן אבטחה - רישום גישה לפרופיל]
    PP --> RR[אחסון מאובטח פשוט - מסלול ביקורת]
    PP --> SS[זיהוי ותגובה לאיומים]
    
    A --> TT[ניהול מצב ממשק]
    TT --> UU[מנהל מצב טעינה - הצגת התקדמות]
    TT --> VV[מנהל מצב ממשק - טיפול בשגיאות]
    TT --> WW[מנהל משוב משתמש - הצגת הצלחה]
    
    A --> XX{תכונות מתקדמות}
    XX -->|אימות ביומטרי| YY[מנהל אימות ביומטרי]
    XX -->|אימות דו-שלבי| ZZ[הגדרה ואימות 2FA]
    XX -->|שחזור חשבון| AAA[שחזור חשבון מאובטח]
    XX -->|ייצוא נתונים| BBB[ייצוא תאימות GDPR]
    
    style A fill:#e8f5e8
    style PP fill:#fff8e1
    style XX fill:#f3e5f5
    style KK fill:#c8e6c9
    style LL fill:#ffebee
```

---

## ⚙️ ארכיטקטורת מערכת שלמה - תשתית ברמת ארגון

```mermaid
graph TD
    A[לקוח אנדרואיד PartyMaker] --> B[יצירת אפליקציית מסיבה]
    B --> C[שכבת אתחול מערכת]
    
    C --> D[אתחול פיירבייס]
    C --> E[אתחול מנהל רשת]
    C --> F[אתחול מנהל זיכרון]
    C --> G[אתחול מאגרים]
    
    G --> H[קבלת מופע מאגר קבוצות]
    G --> I[קבלת מופע מאגר משתמשים]
    
    H --> J{אסטרטגיית מקור נתונים}
    J --> K[מקור נתונים מקומי קבוצות<br/>מסד נתונים אפליקציה חדר]
    J --> L[מקור נתונים מרוחק קבוצות<br/>לקוח שרת פיירבייס]
    
    I --> M[מקור נתונים מקומי משתמש<br/>DAO משתמש חדר]
    I --> N[מקור נתונים מרוחק משתמש<br/>ממשק משתמשים פיירבייס]
    
    L --> O[כלי רשת - ביצוע עם ניסיון חוזר]
    O --> P{שכבת רשת}
    P -->|ראשי| Q[שרת Spring Boot<br/>partymaker.onrender.com:443]
    P -->|גיבוי| R[שרת פיתוח מקומי<br/>localhost:8080]
    P -->|ישיר| S[גישה ישירה לפיירבייס]
    
    Q --> T[בקר פיירבייס ג׳אווה]
    T --> U[שירות פיירבייס ג׳אווה]
    U --> V[SDK מנהל פיירבייס]
    V --> W[מסד נתונים בזמן אמת פיירבייס]
    
    A --> X{ארכיטקטורת MVVM}
    X --> Y[שכבת הצגה]
    X --> Z[שכבת לוגיקה עסקית]
    X --> AA[שכבת נתונים]
    
    Y --> BB[פעילויות ופרגמנטים]
    BB --> CC[זרימת אימות<br/>התחלה→הכרות→התחברות→רישום]
    BB --> DD[זרימת אפליקציה מרכזית<br/>מסך ראשי→מסיבה ראשית→תכונות]
    BB --> EE[תכונות עזר<br/>פרופיל→הגדרות→אבטחה→בינה מלאכותית]
    
    Z --> FF[מודלי תצוגה]
    FF --> GG[מודל תצוגת מסך ראשי]
    FF --> HH[מודל תצוגת אימות]
    FF --> II[מודל תצוגת קבוצה]
    FF --> JJ[מודל תצוגת פרופיל]
    FF --> KK[מודל תצוגת GPT]
    
    AA --> LL[יישום תבנית מאגר]
    LL --> MM[שכבת הפשטת נתונים]
    MM --> NN[אחסון מקומי<br/>חדר + העדפות משותפות]
    MM --> OO[אחסון מרוחק<br/>פיירבייס + שרת מותאם]
    
    A --> PP{תשתית אבטחה}
    PP --> QQ[שכבת אימות]
    QQ --> RR[מנהל אימות<br/>אימות פיירבייס]
    QQ --> SS[מנהל אימות מאובטח<br/>אבטחה משופרת]
    
    PP --> TT[שכבת הצפנה]
    TT --> UU[מנהל מפתחות קבוצה<br/>הצפנת הודעות מקצה לקצה]
    TT --> VV[מנהל העדפות מוצפן<br/>הצפנת נתונים מקומיים]
    TT --> WW[מנהל הצפנת הודעות<br/>אבטחת צ׳אט]
    
    PP --> XX[אבטחת רשת]
    XX --> YY[מנהל הצמדת SSL<br/>הצמדת אישורים]
    XX --> ZZ[מטפל שגיאות רשת<br/>טיפול מאובטח בשגיאות]
    
    PP --> AAA[ניטור אבטחה]
    AAA --> BBB[סוכן אבטחה<br/>זיהוי איומים]
    AAA --> CCC[מאמת סיסמה<br/>אימות קלט]
    
    A --> DDD{ביצועים ותשתית}
    DDD --> EEE[ניהול זיכרון]
    EEE --> FFF[מנהל זיכרון<br/>ניקוי זיכרון נמוך]
    EEE --> GGG[מנהל מצב טעינה<br/>בקרת מצב ממשק]
    
    DDD --> HHH[חוטים ואסינכרוני]
    HHH --> III[כלי חוטים<br/>פעולות רקע]
    HHH --> JJJ[החלפה ל-AsyncTask<br/>תבנית אסינכרונית מודרנית]
    
    DDD --> KKK[אופטימיזציית רשת]
    KKK --> LLL[מנהל קישוריות<br/>ניטור מצב רשת]
    KKK --> MMM[מנגנוני ניסיון חוזר<br/>עיכוב אקספוננציאלי]
    
    A --> NNN{אינטגרציות חיצוניות}
    NNN --> OOO[שירותי גוגל]
    OOO --> PPP[ממשק כניסה גוגל]
    OOO --> QQQ[ממשק מפות גוגל]
    
    NNN --> RRR[אינטגרציית OpenAI]
    RRR --> SSS[ממשק OpenAI<br/>השלמת צ׳אט GPT-4]
    RRR --> TTT[ניהול הקשר צ׳אט]
    
    NNN --> UUU[אינטגרציית מכשיר]
    UUU --> VVV[מנהל הרשאות<br/>הרשאות זמן ריצה]
    UUU --> WWW[מנהל קבצים<br/>גישה למדיה]
    UUU --> XXX[מנהל התראות<br/>התראות דחיפה]
    
    A --> YYY{תבניות זרימת נתונים}
    YYY --> ZZZ[אסטרטגיה מטמון ראשון]
    ZZZ --> AAAA[בדיקת מטמון מקומי]
    ZZZ --> BBBB[משיכה מרוחקת בהחמצה]
    ZZZ --> CCCC[סנכרון רקע]
    
    YYY --> DDDD[תמיכה לא מקוונת]
    DDDD --> EEEE[תור פעולות ממתינות]
    DDDD --> FFFF[פתרון קונפליקטים]
    DDDD --> GGGG[שחזור מצב רשת]
    
    style A fill:#e1f5fe
    style PP fill:#fff8e1
    style DDD fill:#f1f8e9
    style NNN fill:#f3e5f5
    style YYY fill:#e8f5e8
```

---

## 🔄 סנכרון נתונים מתקדם ופתרון קונפליקטים

```mermaid
graph TD
    A[טריגר פעולת משתמש] --> B[מאגר קבוצות - קבלת קבוצות משתמש]
    B --> C{אסטרטגיה מטמון ראשון}
    C -->|פגיעה במטמון| D[מקור נתונים מקומי קבוצות - קבלת כל הפריטים]
    C -->|החמצת מטמון| E[מקור נתונים מרוחק קבוצות - קבלת קבוצות משתמש]
    C -->|רענון כפוי| E
    
    D --> F[בדיקת גיל נתונים]
    F --> G{רעננות נתונים}
    G -->|רענן| H[החזרת נתונים מטמונים]
    G -->|מיושן| I[טריגר רענון רקע]
    
    I --> J[כלי רשת - ביצוע עם ניסיון חוזר]
    J --> K{מצב רשת}
    K -->|זמין| L[לקוח שרת פיירבייס - קבלת קבוצות משתמש]
    K -->|לא זמין| M[נפילה למטמון + הודעה למשתמש]
    
    L --> N[בקשת HTTP עם לוגיקת ניסיון חוזר]
    N --> O{תגובת שרת}
    O -->|הצלחה 200| P[ניתוח ושינוי נתונים]
    O -->|שגיאת לקוח 4xx| Q[טיפול בשגיאות ומשוב למשתמש]
    O -->|שגיאת שרת 5xx| R[ניסיון חוזר עם עיכוב אקספוננציאלי]
    O -->|פסק זמן רשת| S[ניסיון חוזר עם פסק זמן מוגדל]
    
    P --> T[אימות ועיבוד נתונים]
    T --> U[מקור נתונים מקומי קבוצות - שמירת פריט עדכון מטמון]
    U --> V[נתונים חיים - הגדרת ערך עדכון ממשק]
    
    E --> W[תקשורת שרת ישירה]
    W --> X[מודל תצוגת מסך ראשי - טיפול בטעינת קבוצות מוצלחת]
    X --> Y[מיון וסינון קבוצות משתמש]
    Y --> Z[מתאם קבוצות - עדכון פריטים]
    
    A --> AA{פעולות כתיבה}
    AA -->|יצירת קבוצה| BB[מאגר קבוצות - שמירת קבוצה]
    AA -->|עדכון קבוצה| CC[מאגר קבוצות - עדכון קבוצה]
    AA -->|מחיקת קבוצה| DD[מאגר קבוצות - מחיקת קבוצה]
    AA -->|הצטרפות לקבוצה| EE[מאגר קבוצות - הצטרפות לקבוצה]
    AA -->|עזיבת קבוצה| FF[מאגר קבוצות - עזיבת קבוצה]
    
    BB --> GG[עדכון ממשק אופטימיסטי]
    CC --> GG
    DD --> GG
    EE --> GG
    FF --> GG
    
    GG --> HH[שמירה בתור לסנכרון מרוחק]
    HH --> II{מצב רשת}
    II -->|מקוון| JJ[סנכרון שרת מיידי]
    II -->|לא מקוון| KK[תור פעולות ממתינות]
    
    JJ --> LL{תוצאת סנכרון}
    LL -->|הצלחה| MM[הסרה מתור]
    LL -->|כשל| NN[החזרת עדכון אופטימיסטי]
    LL -->|קונפליקט| OO[אסטרטגיית פתרון קונפליקטים]
    
    KK --> PP[משקיף מצב רשת של מנהל קישוריות]
    PP --> QQ{חיבור שוחזר}
    QQ -->|כן| RR[עיבוד תור ממתין]
    QQ -->|לא| SS[המשך ניטור]
    
    RR --> TT[עיבוד תור FIFO]
    TT --> UU[פעולות סנכרון אצוות]
    UU --> VV{תוצאת אצווה}
    VV -->|כל ההצלחות| WW[ניקוי תור]
    VV -->|הצלחה חלקית| XX[ניסיון חוזר פעולות שנכשלו]
    VV -->|כל הכשלים| YY[עיכוב אקספוננציאלי]
    
    OO --> ZZ{סוג קונפליקט}
    ZZ -->|מבוסס חותם זמן| AAA[הכתיבה האחרונה מנצחת]
    ZZ -->|עדיפות משתמש| BBB[עקיפת מנהל]
    ZZ -->|מיזוג נתונים| CCC[אלגוריתם מיזוג חכם]
    ZZ -->|פתרון ידני| DDD[דיאלוג קונפליקט משתמש]
    
    A --> EEE[אינטגרציית שכבת אבטחה]
    EEE --> FFF[מנהל מפתחות קבוצה - הוספת משתמש להצפנת קבוצה]
    EEE --> GGG[סנכרון מנהל הצפנת הודעות]
    EEE --> HHH[סוכן אבטחה - ביקורת גישה לנתונים]
    
    A --> III[אופטימיזציית ביצועים]
    III --> JJJ[כלי חוטים - הרצה בחוט רקע]
    III --> KKK[מנהל זיכרון - אופטימיזציה לפעולה]
    III --> LLL[הדפסה לקבוצות נתונים גדולות]
    III --> MMM[עדכוני דלתא סנכרון מצטברים]
    
    style A fill:#e1f5fe
    style H fill:#c8e6c9
    style V fill:#c8e6c9
    style OO fill:#fff3e0
    style NN fill:#ffebee
    style EEE fill:#fff8e1
    style III fill:#f1f8e9
```

---

## 📊 ביצועים מתקדמים וניהול משאבים

```mermaid
graph TD
    A[יצירת אפליקציית מסיבה] --> B[אתחול ביצועי מערכת]
    B --> C[אתחול מנהל זיכרון]
    C --> D[הגדרת מבצעי כלי חוטים]
    D --> E[אתחול מנהל מצב טעינה]
    
    A --> F[שכבת ניהול זיכרון]
    F --> G[קריאות חוזרות רכיב 2 - על חיתוך זיכרון]
    G --> H{רמת לחץ זיכרון}
    H -->|זיכרון קריטי| I[ניקוי זיכרון חירום]
    H -->|זיכרון בינוני| J[ניהול זיכרון פרואקטיבי]
    H -->|זיכרון רקע| K[ניקוי רקע]
    
    I --> L[ניקוי זיכרון Glide]
    I --> M[ניקוי כל הטבלאות חדר]
    I --> N[ניקוי כל הנתונים מודל תצוגה]
    I --> O[כפיית איסוף זבל מערכת]
    
    J --> P[הפחתת מטמון תמונות]
    J --> Q[ניקוי מטמון רשת]
    J --> R[ניקוי אובייקטים לא בשימוש]
    
    K --> S[טיהור נתוני רקע]
    K --> T[ניקוי קבצים ישנים]
    
    A --> U[ארכיטקטורת חוטים]
    U --> V{סיווג סוג פעולה}
    V -->|עדכוני ממשק| W[כלי חוטים - הרצה בחוט ראשי]
    V -->|קלט/פלט רשת| X[מבצע מאגר חוטים רקע]
    V -->|פעולות מסד נתונים| Y[מבצע IO חוט יחיד]
    V -->|עיבוד אינטנסיבי| Z[מאגר עיבוד מקבילי]
    V -->|פעולות קבצים| AA[חוט IO קבצים]
    
    X --> BB[פעולות לקוח שרת פיירבייס]
    BB --> CC[חיבורים מוצמדי SSL]
    CC --> DD[איחוד וחזרה על חיבורים]
    DD --> EE[ניהול פסק זמן בקשות]
    
    Y --> FF[פעולות מסד נתונים חדר]
    FF --> GG[אצוות עסקאות]
    GG --> HH[אופטימיזציית שאילתות SQL]
    HH --> II[ניתוח שימוש באינדקסים]
    
    Z --> JJ[צינור עיבוד תמונות]
    JJ --> KK[דחסן תמונות - דחיסה להעלאה]
    KK --> LL[קידוד JPEG מתקדם]
    LL --> MM[עיבוד רב-חוטי]
    
    A --> NN[אופטימיזציית מחזור חיי פעילות]
    NN --> OO{ניהול מצב מחזור חיים}
    OO -->|ביצירה| PP[הקצאת משאבים מינימלית]
    OO -->|בהתחלה| QQ[קישור שירות]
    OO -->|בהמשכה| RR[רענון נתונים עם זמן המתנה]
    OO -->|בהשהיה| SS[התמדה מצב]
    OO -->|בעצירה| TT[שחרור משאבים]
    OO -->|בהרס| UU[ניקוי מלא]
    
    RR --> VV[בדיקת זמן המתנה לרענון במילי-שניות]
    VV --> WW{זמן המתנה חלף?}
    WW -->|כן| XX[רענון נתונים כפוי]
    WW -->|לא| YY[דילוג על רענון]
    
    SS --> ZZ[שמירת מנהל העדפות מוצפן]
    TT --> AAA[ניקוי חיבור רשת]
    UU --> BBB[ביטול רישום משקיפים]
    BBB --> CCC[מניעת דליפות זיכרון]
    
    A --> DDD[שכבת ביצועי רשת]
    DDD --> EEE[מעקב מצב רשת מנהל קישוריות]
    EEE --> FFF[זיהוי רוחב פס]
    FFF --> GGG[הגדרות איכות מסתגלות]
    
    DDD --> HHH[כלי רשת - ביצוע עם ניסיון חוזר]
    HHH --> III[אסטרטגיית עיכוב אקספוננציאלי]
    III --> JJJ[תבנית מפסק זרם]
    JJJ --> KKK[הסרת כפילות בקשות]
    
    A --> LLL[אופטימיזציית ביצועי ממשק]
    LLL --> MMM[מיחזור בעל תצוגה של תצוגה מחזורית]
    MMM --> NNN[DiffUtil לעדכונים יעילים]
    NNN --> OOO[אופטימיזציית קישור תצוגה]
    
    LLL --> PPP[מנהל מצב טעינה - הצגת טעינה]
    PPP --> QQQ[עיבוד ממשק מתקדם]
    QQQ --> RRR[יישום מסך שלד]
    
    LLL --> SSS[מנהל מצב ממשק - טיפול בשגיאות]
    SSS --> TTT[הודעות שגיאה ידידותיות למשתמש]
    TTT --> UUU[השפלה אלגנטית]
    
    A --> VVV[ניטור ואנליטיקה]
    VVV --> WWW[איסוף מדדי ביצועים]
    WWW --> XXX[מעקב שימוש זיכרון]
    XXX --> YYY[ניטור זמן השהייה רשת]
    YYY --> ZZZ[אנליטיקה של חוויית משתמש]
    
    style A fill:#e1f5fe
    style I fill:#ffebee
    style U fill:#f1f8e9
    style DDD fill:#fff3e0
    style LLL fill:#f3e5f5
    style VVV fill:#e8f5e8
```

---

*דיאגרמות אלו מספקות תמונה מקיפה של כל הזרימות באפליקציית PartyMaker ברמה מקצועית ארגונית*